{"name":"Moments-Away","tagline":"Moment.js durations made easier, ActiveSupport-style.","body":"moments-away\r\n============\r\n\r\n[![Build Status](https://travis-ci.org/tdd/moments-away.png?branch=master)](https://travis-ci.org/tdd/moments-away)\r\n[![Coverage Status](https://s3.amazonaws.com/assets.coveralls.io/badges/coveralls_100.png)](https://coveralls.io/r/tdd/moments-away)\r\n[![Code Climate](https://codeclimate.com/github/tdd/moments-away.png)](https://codeclimate.com/github/tdd/moments-away)\r\n[![Dependency Status](https://gemnasium.com/tdd/moments-away.png)](https://gemnasium.com/tdd/moments-away)\r\n\r\nMoment.js durations made easier, ActiveSupport-style.\r\n\r\nWut?\r\n====\r\n\r\n[Moment.js](http://momentjs.com/) is a great JS library for manipulating dates and times in just about every way possible.  If you do this kind of stuff, you should absolutely use Moment.\r\n\r\nIt provides a system of *durations* (e.g. “1 month”) that allow reliable offsets between dates.  For instance, a month is a contextual notion: this could end up being anywhere from 28 to 31 days, not to mention the leap second thing we sometimes get at the end of the year.\r\n\r\nHowever, I favor another reading style when manipulating such things, mostly because I'm used to the ActiveSupport way of doing things (in Ruby/Rails).  In Moment, you'd so something like :\r\n\r\n```js\r\n// The Moment way\r\n\r\n// Based on a specific date:\r\nvar d = new Date(2013, 10, 6);\r\nmoment(d).add(3, 'months').toDate() // \"3 months after d\"\r\nmoment(d).subtract(1, 'year').toDate() // \"1 year before d\"\r\n\r\n// Based on now:\r\nmoment().add(1, 'month').toDate()  // \"1 month from now\"\r\nmoment().subtract(2, 'weeks').toDate()  // \"2 weeks ago\"\r\n```\r\n\r\nThis is functionally great, but I like how ActiveSupport reads better, so I created this little library that builds on Moment (which you should have available, then) and adds some stuff.  Mirroring that exact Ruby syntax in JS is fairly convoluted and bulky memory-wise, so I went with something slightly different, but here it is.\r\n\r\n```js\r\n// The Moments-Away way\r\n\r\n// Based on a specific date:\r\nvar d = new Date(2013, 10, 6);\r\n'3 months'.after(d)\r\n'1 year'.before(d)\r\n\r\n// Based on now:\r\n'1 month'.fromNow()\r\n'2 weeks'.ago()\r\n\r\n// Based on Numbers instead of strings:\r\n(3).months().after(d)\r\n(1).year().before(d)\r\n\r\nvar om = 1, ow = 2;\r\nom.months().fromNow()\r\now.weeks().ago()\r\n```\r\n\r\nInstallation\r\n============\r\n\r\nIf you're using this in Node or installing through npm, just go with it:\r\n\r\n```\r\nnpm install --save moments-away\r\n```\r\n\r\n[Bower](http://bower.io/) more your cup of tea?  Here you go:\r\n\r\n```\r\nbower install moments-away\r\n```\r\n\r\nPerhaps you favor TJ's [Component](http://component.io/)?  Not a problem:\r\n\r\n```\r\ncomponent install tdd/moments-away\r\n```\r\n\r\nOtherwise you can just pick up the [library source file](https://raw.github.com/tdd/moments-away/master/moments-away.js) (only 1.7KB uncompressed).\r\n\r\nZOMG! :scream: You're extending native prototypes!\r\n==================================================\r\n\r\nYes, I am.  This is necessary to achieve the level of expressiveness I was shooting for, and this does work across browsers.\r\n\r\nIf that looks too irksome for you, feel free to fork this and provide an alternative that uses, say, a global wrapper function over `String`s or `Number`s that returns the appropriate objects.\r\n\r\nThe API\r\n=======\r\n\r\n`String`- or `Number`-based\r\n---------------------------\r\n\r\nDepending on what you're working with, it'll be smoother to use either a `String`- or `Number`-based API.\r\n\r\nYou’ll usually work with strings for one-off duration specifications.  Loading the library automagically equips `String` with four new methods:\r\n\r\n* `before(date)` returns a `Date` the precedes the `date` argument by the duration defined in the string.\r\n* `after(date)` returns a `Date` the follows the `date` argument by the duration defined in the string.\r\n* `ago()` returns a past `Date` with a distance defined in the string.\r\n* `fromNow()` returns a future `Date` with a distance defined in the string.\r\n\r\nThe string should start with a number, followed possibly by whitespace, followed by one of the duration units recognized by `moment.duration` (this is every `Date` sub-unit from `milliseconds` to `years`, singular or plural, along with a few abbreviated forms, such as `ms`, `s` or `y`, for instance).  Surrounding whitespace is ignored.\r\n\r\nIf you have an existing number (variable, argument, etc.) that defines your base duration, using the `Number`-based API will feel smoother:\r\n\r\n```js\r\nfunction setAuthCookie(sessionId) {\r\n  // var expiry = (AUTH_EXPIRY_MONTHS + ' months').fromNow(); // Ugh\r\n  var expiry = AUTH_EXPIRY_MONTHS.months().fromNow();         // Better\r\n  document.cookie = \"authId=\" + sessionId + \"; expires=\" + expiry;\r\n}\r\n```\r\n\r\nLoading the library automagically equips `Number` with new methods for every duration unit supported by `moment.duration`, using the long forms, singular or plural:\r\n\r\n* `milliseconds()`, `millisecond()`\r\n* …\r\n* `years()`, `year()`\r\n\r\nThe abbreviated forms are not used: less readable, more prone to naming conflicts.\r\n\r\nThese do not return numbers or strings, but actual Moment durations (which you could then use in regular Moment API calls), which remain contextual and will work at any later time, including on long-lived web pages.\r\n\r\nIn order to make the API homogeneous, we also extend Moment durations with the same four methods as on `String`: `before(date)`, `after(date)`, `ago()` and `fromNow()`.\r\n\r\nContributing\r\n============\r\n\r\nYou can report any issues or feature requests [on GitHub](https://github.com/tdd/moments-away/issues).\r\n\r\nFeel free to fork the repo, contribute and submit pull requests.  These must always come with updated tests.\r\n\r\nLicence\r\n=======\r\n\r\nThis work is MIT licence.  Read the licence [here](https://github.com/tdd/moments-away/blob/master/LICENSE).\r\n\r\nTo-do\r\n=====\r\n\r\n* JS Test Coverage report\r\n* Provide GitHub pages\r\n* GitHub release (update package.json, tag as 0.1.0) & Formal announcement\r\n","google":"UA-43650325-3","note":"Don't delete this file! It's used internally to help with page regeneration."}